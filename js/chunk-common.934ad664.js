(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"00f9":function(e,t,i){},"0332":function(e,t,i){},"0e19":function(e,t,i){"use strict";i.d(t,"a",function(){return d});i("ac6a"),i("5df3"),i("10ad"),i("0d6d");var n=i("768b"),r=i("d225"),a=i("b0b4"),o=i("a52d"),c=i("ab0e"),s=8,u=i("8707").Buffer,l=i("2362")("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-._~"),d=function(){function e(){Object(r["a"])(this,e),h.set(this,{writable:!0,value:0}),f.set(this,{writable:!0,value:0}),b.set(this,{writable:!0,value:[]}),p.set(this,{writable:!0,value:function(){0!==Object(c["a"])(this,f)&&(Object(c["a"])(this,b).push(Object(c["a"])(this,h)<<s-Object(c["a"])(this,f)),Object(o["a"])(this,h,Object(o["a"])(this,f,0)))}})}return Object(a["a"])(e,[{key:"write",value:function(e){var t=e.value,i=e.writeBitCount;i<=0||(Object(o["a"])(this,h,Object(c["a"])(this,h)<<1|t>>i-1&1),Object(o["a"])(this,f,+Object(c["a"])(this,f)+1)%s===0&&Object(c["a"])(this,p).call(this),this.write({value:t,writeBitCount:i-1}))}},{key:"writeVariableLength",value:function(e){var t=e.value,i=e.writeBitCount,r=e.partitionBitCount,a=this,o=function e(t,i){if(i<=r)return[t>>>r,function(){a.write({value:0,writeBitCount:1}),a.write({value:t,writeBitCount:r})}];var o=e(t,i-r),c=Object(n["a"])(o,2),s=c[0],u=c[1];return[s>>>r,function(){0!==s&&(a.write({value:1,writeBitCount:1}),a.write({value:s,writeBitCount:r})),u()}]},c=o(t,i),s=Object(n["a"])(c,2),u=s[1];u()}},{key:"finalize",value:function(){return Object(c["a"])(this,p).call(this),Object.freeze(this),l.encode(u.from(Object(c["a"])(this,b)))}}]),e}(),h=new WeakMap,f=new WeakMap,b=new WeakMap,p=new WeakMap},1842:function(e,t,i){"use strict";var n=i("00f9"),r=i.n(n);r.a},"52f7":function(e,t,i){"use strict";i("5df3"),i("10ad"),i("ac4d"),i("8a81"),i("96cf"),i("ac6a"),i("8615"),i("6762"),i("2fdb");var n=i("d225"),r=i("b0b4"),a=i("bd86"),o=i("ab0e"),c=i("a52d"),s=(i("0d6d"),{}),u=s;Object.defineProperty(s,"Properties",{value:function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.cleared,a=void 0===r?function(e){return t}:r,o=i.adjacentCleared,c=void 0===o?function(e){return t}:o,s=i.gravityImmune,u=void 0!==s&&s,l=i.symbol,d=void 0===l?"?":l;Object(n["a"])(this,e),this.cleared=a,this.adjacentCleared=c,this.gravityImmune=u,this.symbol=d,Object.freeze(this)}}),Object.defineProperty(s,"EMPTY",{value:new s.Properties({gravityImmune:!0,symbol:" "}),enumerable:!0});var l=i("9a04"),d=(i("1c4c"),i("75fc")),h=(i("4f7f"),i("f400"),i("e36d")),f=function(){function e(){Object(n["a"])(this,e)}return Object(r["a"])(e,null,[{key:"findConnections",value:function(e,t){var i=t.targetObjects,n=t.minConnection,r=void 0===n?1:n,a=t.onlyVisible,o=void 0===a||a,c=new Map(i.map(function(e){return[e,[]]}));return new Set(Object(d["a"])(Array(e.dimension.rows*e.dimension.columns).keys())).forEach(function(t,i,n){var a=new e.Positional({primitive:t}),s=a.object;if(o&&a.hidden||!c.has(s))n.delete(a.primitive);else{var u=[];(function e(t){n.has(t.primitive)&&s===t.object&&(n.delete(t.primitive),o&&t.hidden||(u.push(t),t.adjacent.forEach(e)))})(a),u.length>=r&&c.get(s).push(u)}}),c}},{key:"flattenConnectionMap",value:function(e){var t=function(e){return e.reduce(function(e,t){return e.concat(t)},[])};return t(t(Array.from(e.values())))}},{key:"clearingDiff",value:function(e){var t=new Map,i=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t.cleared(e)};if(e.valid){var n=t.has(e.primitive)?t.get(e.primitive).newObject:e.object,r=i(n);n!==r&&t.set(e.primitive,new h["a"]({type:h["a"].Type.TRANSFORM,positional:e,argument:r}))}},n=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;i(s);var u=!0,f=!1,b=void 0;try{for(var p,m=function(){var e=p.value;i(e,function(t){return t.adjacentCleared(e)})},v=s.adjacent[Symbol.iterator]();!(u=(p=v.next()).done);u=!0)m()}catch(y){f=!0,b=y}finally{try{u||null==v.return||v.return()}finally{if(f)throw b}}}}catch(y){r=!0,a=y}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return Object(l["a"])(h["a"].Collection,Object(d["a"])(t.values()))}},{key:"diff",value:function(e,t){var i=[e.dimension,t.dimension],n=i[0],r=i[1];if(n.columns===r.columns&&n.visibleRows===r.visibleRows&&n.hiddenRows===r.hiddenRows){for(var a=new h["a"].Collection,o=new e.Positional,c=new t.Positional;o.valid;s=[o.right.bottom,c.right.bottom],o=s[0],c=s[1],s)for(var s;o.valid;u=[o.above,c.above],o=u[0],c=u[1],u){var u;o.object!==c.object&&a.push(new h["a"]({type:h["a"].Type.TRANSFORM,positional:o,argument:c.object}))}return a}}},{key:"gravitationalDiff",value:function(e){for(var t=new h["a"].Collection,i=new Map,n=new e.Positional,r=new e.Positional;n.valid;a=[n.right.bottom,r.right.bottom],n=a[0],r=a[1],a)for(var a;n.valid;n=n.above){var o=i.get(n.primitive)||n.object,c=i.get(r.primitive)||r.object;o!==u.EMPTY&&(o.gravityImmune?r.row=n.row:o!==c&&(t.push(new h["a"]({type:h["a"].Type.EXCHANGE,positional:n,argument:r})),i.set(n.primitive,c),i.set(r.primitive,o)),r=r.above)}return t}}]),e}(),b=(i("14b9"),i("0e19")),p=(i("ffc1"),i("768b")),m=i("fa35"),v=function(){function e(t){var i=t.entry;i=void 0===i?[]:i;var r=Object(p["a"])(i,2),a=r[0],o=r[1],c=t.branches;c=void 0===c?[]:c;var s=Object(p["a"])(c,2),u=s[0],l=s[1];Object(n["a"])(this,e),u&&l?(this.symbol=u.symbol+l.symbol,this.frequency=u.frequency+l.frequency,this.left=u,this.right=l):(this.symbol=a,this.frequency=o,this.left=null,this.right=null),Object.freeze(this)}return Object(r["a"])(e,null,[{key:"comparator",value:function(e,t){return e.frequency<t.frequency?-1:e.frequency>t.frequency?1:e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}}]),Object(r["a"])(e,[{key:"isLeaf",value:function(){return null===this.left&&null===this.right}},{key:"to",value:function(t){this.isLeaf()?(t.write({value:e.LEAF,writeBitCount:1}),t.write({value:this.symbol.charCodeAt(0),writeBitCount:8})):(t.write({value:e.BRANCH,writeBitCount:1}),this.left.to(t),this.right.to(t))}}],[{key:"from",value:function(e){return e.read(1)===this.BRANCH?new this({branches:[this.from(e),this.from(e)]}):new this({entry:[String.fromCharCode(e.read(8)),0]})}}]),e}();Object(a["a"])(v,"BRANCH",0),Object(a["a"])(v,"LEAF",1);var y=function(){function e(t){Object(n["a"])(this,e),w.set(this,{writable:!0,value:void 0});var i=new m["a"](Object.entries(t).map(function(e){return new v({entry:e})}),v.comparator);while(i.length>1)i.push(new v({branches:[i.pop(),i.pop()]}));Object(c["a"])(this,w,i.pop())}return Object(r["a"])(e,[{key:"to",value:function(e){Object(o["a"])(this,w).to(e)}}],[{key:"from",value:function(e){var t=new this({});return Object(c["a"])(t,w,v.from(e)),t}}]),Object(r["a"])(e,[{key:"symbolFromStream",value:function(t){for(var i=Object(o["a"])(this,w);!i.isLeaf();i=t.read(1)===e.LEFT?i.left:i.right);return i.symbol}},{key:"encoding",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(o["a"])(this,w),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(i.isLeaf())t[i.symbol]=n;else{var r=function(e){return function(t){n(t),t.write({value:e,writeBitCount:1})}};this.encoding(t,i.left,r(e.LEFT)),this.encoding(t,i.right,r(e.RIGHT))}return t}}]),e}(),w=new WeakMap;Object(a["a"])(y,"LEFT",0),Object(a["a"])(y,"RIGHT",1);var j=function(e){var t={toAsciiArt:function(e){for(var t=["++"+"=".repeat(2*e.dimension.columns+1)+"++"],i=new e.Positional;i.valid;i=i.farLeft.above){for(var n=" ",r=i.hidden?"  ":"||";i.valid;i=i.right)n+=i.object.symbol+" ";t.unshift(r+n+r)}return t.join("\n")},toBitStream:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new b["a"],i={},n=new e.Positional;n.valid;n=n.bottom.right)for(;n.valid;n=n.above){var r=n.object.symbol;i[r]=i[r]?i[r]+1:1}var a=new y(i);a.to(t);var o=a.encoding(),c=!0,s=!1,u=void 0;try{for(var l,d=e[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){var h=l.value;o[h.object.symbol](t)}}catch(f){s=!0,u=f}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}return t}};return t},g=i("01c8"),O=(i("28a5"),function(e){var t={},i=function(){return Object.values(e.Object).reduce(function(e,t){return e[t.symbol]=t,e},{})};return t.fromAsciiArt=function(t){var n=i(),r=t.split("\n"),a=new e({columns:Math.ceil(r.pop().slice(3,-3).length/2),hiddenRows:function(e){var t=!0,i=!1,n=void 0;try{for(var a,o=r[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var c=a.value;if(" "!=c[0])break;++e}}catch(s){i=!0,n=s}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}return e}(0),visibleRows:r.length-this.hiddenRows}),o=(new a.Positional).top,c=!0,s=!1,u=void 0;try{for(var l,d=r[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){for(var h=l.value,f=h.slice(3,-1),b=Object(g["a"])(f),p=b[0],m=(b[1],b.slice(2));m.length>0;v=m,y=Object(g["a"])(v),p=y[0],y[1],m=y.slice(2),v){var v,y;o.object=n[p],o=o.right}o=o.farLeft.below}}catch(w){s=!0,u=w}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}return a},t.fromBitStream=function(e,t){var n=y.from(t),r=i(),a=!0,o=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var l=s.value;l.object=r[n.symbolFromStream(t)]}}catch(d){o=!0,c=d}finally{try{a||null==u.return||u.return()}finally{if(o)throw c}}return e},t});i.d(t,"a",function(){return P});var k={BELOW:1,ABOVE:2,RIGHT:4,LEFT:8},C=Symbol.iterator,P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.columns,a=void 0===i?6:i,s=t.visibleRows,u=void 0===s?12:s,l=t.hiddenRows,d=void 0===l?1:l;Object(n["a"])(this,e),E.set(this,{writable:!0,value:void 0}),this.dimension={columns:a>=0?a:6,visibleRows:u>=0?u:12,hiddenRows:d>=0?d:1,get rows(){return this.visibleRows+this.hiddenRows}},Object(c["a"])(this,E,[]);var h=this;this.Positional=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.row,r=void 0===i?0:i,a=e.column,o=void 0===a?0:a,c=e.primitive;if(Object(n["a"])(this,t),void 0!==c)this.row=c%h.dimension.rows,this.column=Math.floor(c/h.dimension.rows);else{var s=[r,o];this.row=s[0],this.column=s[1]}}return Object(r["a"])(t,[{key:"primitive",get:function(){return this.column*h.dimension.rows+this.row}},{key:"above",get:function(){return new this.constructor({row:this.row+1,column:this.column})}},{key:"below",get:function(){return new this.constructor({row:this.row-1,column:this.column})}},{key:"left",get:function(){return new this.constructor({row:this.row,column:this.column-1})}},{key:"right",get:function(){return new this.constructor({row:this.row,column:this.column+1})}},{key:"adjacent",get:function(){return[this.above,this.below,this.left,this.right]}},{key:"top",get:function(){return new this.constructor({row:h.dimension.rows-1,column:this.column})}},{key:"farRight",get:function(){return new this.constructor({row:this.row,column:h.dimension.columns-1})}},{key:"bottom",get:function(){return new this.constructor({row:0,column:this.column})}},{key:"farLeft",get:function(){return new this.constructor({row:this.row,column:0})}},{key:"hidden",get:function(){return h.dimension.visibleRows<=this.row&&this.row<h.dimension.rows}},{key:"valid",get:function(){return 0<=this.row&&this.row<h.dimension.rows&&0<=this.column&&this.column<h.dimension.columns}},{key:"field",get:function(){return h}},{key:"connections",get:function(){return!this.object||this.hidden?0:0|(this.below.hidden||this.below.object!=this.object?0:k.BELOW)|(this.above.hidden||this.above.object!=this.object?0:k.ABOVE)|(this.right.hidden||this.right.object!=this.object?0:k.RIGHT)|(this.left.hidden||this.left.object!=this.object?0:k.LEFT)}},{key:"object",get:function(){if(this.valid){var t=[this.row,this.column],i=t[0],n=t[1];return Object(o["a"])(h,E)[n]&&Object(o["a"])(h,E)[n][i]?Object(o["a"])(h,E)[n][i]:e.Object.EMPTY}},set:function(t){if(this.valid&&Object.values(e.Object).includes(t)){var i=[this.row,this.column],n=i[0],r=i[1];if(t===e.Object.EMPTY){if(!Object(o["a"])(h,E)[r])return;delete Object(o["a"])(h,E)[r][n]}else Object(o["a"])(h,E)[r]||(Object(o["a"])(h,E)[r]=[]),Object(o["a"])(h,E)[r][n]=t}}}]),t}()}return Object(r["a"])(e,[{key:C,value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=new this.Positional;case 1:if(!t.valid){e.next=11;break}case 2:if(!t.valid){e.next=8;break}return e.next=5,t;case 5:t=t.above,e.next=2;break;case 8:t=t.right.bottom,e.next=1;break;case 11:case"end":return e.stop()}},e,this)})},{key:"clone",value:function(){var e=new this.constructor(this.dimension);return Object(c["a"])(e,E,Object(o["a"])(this,E).map(function(e){return void 0!==e?e.slice():void 0})),e}},{key:"erase",value:function(){Object(c["a"])(this,E,[])}}]),e}(),E=new WeakMap;Object(a["a"])(P,"Object",u),Object(a["a"])(P,"Algorithm",f),Object(a["a"])(P,"Serializer",j(P)),Object(a["a"])(P,"Deserializer",O(P))},"5c0e":function(e,t,i){"use strict";i("ac4d"),i("8a81"),i("ac6a");var n=i("b0b4"),r=i("d225"),a=i("bd86"),o=i("52f7"),c=i("0e19"),s=(i("10ad"),i("5df3"),i("1c4c"),i("ab0e")),u=i("a52d"),l=8,d=i("2362")("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-._~"),h=function(){function e(t){Object(r["a"])(this,e),f.set(this,{writable:!0,value:0}),b.set(this,{writable:!0,value:0}),p.set(this,{writable:!0,value:void 0}),Object(u["a"])(this,p,Array.from(d.decode(t)))}return Object(n["a"])(e,[{key:"read",value:function(e){if(e<=0)return 0;if(0===Object(s["a"])(this,b)){if(0===Object(s["a"])(this,p).length)return;Object(u["a"])(this,f,Object(s["a"])(this,p).shift()),Object(u["a"])(this,b,l)}var t=(Object(s["a"])(this,f)>>Object(u["a"])(this,b,+Object(s["a"])(this,b)-1)&1)<<e-1;return t|this.read(e-1)}},{key:"readVariableLength",value:function(e){var t=0;do{var i=this.read(1);t<<=e,t|=this.read(e)}while(1===i);return t}}]),e}(),f=new WeakMap,b=new WeakMap,p=new WeakMap;i.d(t,"a",function(){return y});var m=void 0;o["a"].Object.RED=new o["a"].Object.Properties({symbol:"R",cleared:function(e){return e.hidden?m:o["a"].Object.EMPTY}}),o["a"].Object.YELLOW=new o["a"].Object.Properties({symbol:"Y",cleared:function(e){return e.hidden?m:o["a"].Object.EMPTY}}),o["a"].Object.BLUE=new o["a"].Object.Properties({symbol:"B",cleared:function(e){return e.hidden?m:o["a"].Object.EMPTY}}),o["a"].Object.GREEN=new o["a"].Object.Properties({symbol:"G",cleared:function(e){return e.hidden?m:o["a"].Object.EMPTY}}),o["a"].Object.PURPLE=new o["a"].Object.Properties({symbol:"P",cleared:function(e){return e.hidden?m:o["a"].Object.EMPTY}}),o["a"].Object.BLOCK=new o["a"].Object.Properties({symbol:"=",gravityImmune:!0}),o["a"].Object.IRON=new o["a"].Object.Properties({symbol:"-"}),o["a"].Object.NUISANCE=new o["a"].Object.Properties({symbol:"o",adjacentCleared:function(){return o["a"].Object.EMPTY}}),o["a"].Object.HARD_NUISANCE=new o["a"].Object.Properties({symbol:"O",adjacentCleared:function(){return o["a"].Object.NUISANCE}});var v=32,y=function e(t){var i=t.rule,n=t.dimension;Object(r["a"])(this,e),this.rule=i,this.field=new o["a"](n)};Object(a["a"])(y,"Modes",[]),Object(a["a"])(y,"Serializer",function(){function e(){Object(r["a"])(this,e)}return Object(n["a"])(e,null,[{key:"headerToBitStream",value:function(e,t){for(var i=t.actualParams,n=t.defaultParams,r=t.partitionSizes,a=0;a<n.length;++a)i[a]===n[a]?e.write({value:0,writeBitCount:1}):(e.write({value:1,writeBitCount:1}),null===i[a]?e.write({value:0,writeBitCount:1}):(e.write({value:1,writeBitCount:1}),e.writeVariableLength({value:i[a],writeBitCount:v,partitionBitCount:r[a]})))}},{key:"toBitStream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c["a"];return t.writeVariableLength({value:y.Modes.indexOf(e.constructor),writeBitCount:v,partitionBitCount:4}),e.constructor.Serializer.toBitStream(e,t)}},{key:"encode",value:function(e){return y.Serializer.toBitStream(e).finalize()}}]),e}()),Object(a["a"])(y,"Deserializer",function(){function e(){Object(r["a"])(this,e)}return Object(n["a"])(e,null,[{key:"array2objects",value:function(e){var t=e.array,i=e.objectKeys,n=[],r=!0,a=!1,o=void 0;try{for(var c,s=i[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;n.push(u.reduce(function(e,i){return e[i]=t.shift(),e},{}))}}catch(l){a=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}},{key:"headerFromBitStream",value:function(e,t){for(var i=t.defaultParams,n=t.partitionSizes,r=0;r<i.length;++r)0!==e.read(1)&&(i[r]=0===e.read(1)?null:e.readVariableLength(n[r]));return i}},{key:"fromBitStream",value:function(e){return y.Modes[e.readVariableLength(4)].Deserializer.fromBitStream(e)}},{key:"fromEncoded",value:function(e){return y.Deserializer.fromBitStream(new h(e))}},{key:"fromAsciiArt",value:function(e){var t=e.art,i=e.parameters;return y.Modes[i.mode||0].Deserializer.fromAsciiArt({art:t,parameters:i})}}]),e}())},"973e":function(e,t,i){"use strict";var n=i("0332"),r=i.n(n);r.a},"9bdd":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editor"},[i("PuyoPlayer",{ref:"puyoPlayer",attrs:{encoded:e.passEncoded,editMode:!0,color:e.color},on:{"update:encoded":function(t){e.passEncoded=t}}}),i("div",{staticClass:"editor__control"},[i("ul",{staticClass:"editor__color"},[e._l(e.colorList,function(t){return i("li",{key:t,class:[{"editor__color--active":e.color===t},"editor__color--"+t],on:{click:function(i){e.color=t}}})}),i("li",{staticClass:"editor__color--CLEARALL",on:{click:e.clearAll}})],2),i("div",{staticClass:"editor__code"},[i("input",{staticClass:"editor__encoded",attrs:{id:"inputEncoded",type:"text",name:"encoded"},domProps:{value:e.passEncoded}}),i("textarea",{staticClass:"editor__liquid",attrs:{id:"liquidMarkdown"}}),i("button",{staticClass:"editor__button",attrs:{title:"Generate Code"},on:{click:e.genCode}},[i("i",{staticClass:"fas fa-code"})]),i("button",{staticClass:"editor__button",attrs:{title:"Copy Code"},on:{click:e.copyEncoded}},[i("i",{staticClass:"fas fa-copy"})]),i("button",{staticClass:"editor__button",attrs:{title:"Generate Liquid"},on:{click:e.copyLiquid}},[i("i",{staticClass:"fab fa-markdown"})])])])],1)},r=[],a=(i("456d"),i("ac6a"),i("9d65")),o=i("52f7"),c={components:{PuyoPlayer:a["a"]},props:{encoded:{type:String,default:""}},data:function(){return{minConnections:4,fieldWidth:6,fieldHeight:12,fieldHidden:1,passEncoded:this.encoded,color:"EMPTY"}},computed:{},methods:{clearAll:function(){this.$refs.puyoPlayer.$refs.puyoField.clearAll()},genCode:function(){this.$refs.puyoPlayer.$refs.puyoField.encodeGame()},copyEncoded:function(){document.getElementById("inputEncoded").select(),document.execCommand("copy")},copyLiquid:function(){document.getElementById("liquidMarkdown").value="{% puyosim mode:0 %}\n".concat(this.$refs.puyoPlayer.$refs.puyoField.genliquid(),"\n{% endpuyosim %}\n"),document.getElementById("liquidMarkdown").select(),document.execCommand("copy")}},created:function(){var e=this;this.colorList=[],Object.keys(o["a"].Object).forEach(function(t){e.colorList.push(t)})}},s=c,u=(i("1842"),i("2877")),l=Object(u["a"])(s,n,r,!1,null,"b404e5b2",null);t["a"]=l.exports},"9d65":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"player"},[i("PuyoField",{ref:"puyoField",attrs:{encoded:e.passEncoded,state:e.state,editMode:e.editMode,color:e.color},on:{"update:encoded":function(t){e.passEncoded=t},"update:state":function(t){e.state=t}}}),i("ul",{staticClass:"player__control",style:e.playerHeight},[e.playing?e._e():i("li",{on:{click:function(t){return t.stopPropagation(),e.play(t)}}},[i("i",{staticClass:"fas fa-play"})]),e.playing?i("li",{on:{click:function(t){return t.stopPropagation(),e.stop(t)}}},[i("i",{staticClass:"fas fa-pause"})]):e._e(),i("li",{on:{click:function(t){return t.stopPropagation(),e.step(t)}}},[i("i",{staticClass:"fas fa-step-forward"})]),i("li",{on:{click:function(t){return t.stopPropagation(),e.reset(t)}}},[i("i",{staticClass:"fas fa-fast-backward"})]),e.editMode?e._e():i("li",{on:{click:function(t){return t.stopPropagation(),e.openEditPage(t)}}},[i("i",{staticClass:"fas fa-edit"})])])],1)},r=[],a=(i("ac4d"),i("8a81"),i("ac6a"),i("386d"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"puyostage"}})}),o=[],c=(i("6c7b"),i("5df3"),i("96cf"),i("3b8d")),s=i("912c"),u=i("109c"),l=i("876d"),d=i("9e5b"),h=i("5c0e"),f=i("52f7"),b=32,p=26,m=[19,24,28,31,34,37,40,42,44,46,48],v="STATE_IDLE",y="STATE_END",w="STATE_PLAY",j="STATE_STEP",g="STATE_RESET",O={name:"PuyoField",data:function(){return{app:null,game:null,chain:0}},props:{encoded:String,state:String,editMode:Boolean,color:String},watch:{state:function(e,t){switch(e){case w:t===v?(this.savedField||(this.savedField=this.game.field.clone(),this.editMode&&(this.container.editor.interactive=!1,this.container.editor.renderable=!1)),this.play()):this.$emit("update:state",v);break;case j:t===v?(this.savedField||(this.savedField=this.game.field.clone(),this.editMode&&(this.container.editor.interactive=!1,this.container.editor.renderable=!1)),this.step()):this.$emit("update:state",v);break;case g:t!==v&&t!==y||!this.savedField?this.$emit("update:state",v):this.reset();break;case v:case y:default:break}},color:function(e){var t=s["loader"].resources["pic/skin.json"].textures;switch(e){case"RED":this.editor.color.texture=t["red0"];break;case"GREEN":this.editor.color.texture=t["green0"];break;case"BLUE":this.editor.color.texture=t["blue0"];break;case"YELLOW":this.editor.color.texture=t["yellow0"];break;case"PURPLE":this.editor.color.texture=t["purple0"];break;case"BLOCK":this.editor.color.texture=t["blocks"];break;case"NUISANCE":this.editor.color.texture=t["nuisance"];break;case"HARD_NUISANCE":this.editor.color.texture=t["hard-nuisance"];break;case"IRON":this.editor.color.texture=t["iron"];break;case"EMPTY":default:this.editor.color.texture=null;break}},encode:function(){this.encodeGame()}},computed:{editorColor:function(){return f["a"].Object[this.color]}},methods:{encodeGame:function(){var e=h["a"].Serializer.encode(this.game);this.$emit("update:encoded",e)},genliquid:function(){return f["a"].Serializer.toAsciiArt(this.game.field)},timelinePromise:function(e,t,i){var n=this;return new Promise(function(r){e.play(),e.eventCallback("onComplete",function(){"gravity"===i&&n.setPuyo(t.otherPositional,t.otherPositional.connections),r()})})},step:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.state!==y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.gravity();case 4:if(e.t0=e.sent,e.t0){e.next=9;break}return e.next=8,this.clear();case 8:e.t0=e.sent;case 9:t=e.t0,t?this.$emit("update:state",v):this.$emit("update:state",y);case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),play:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.state!==y;case 1:if(!t){e.next=16;break}if(this.state!==w){e.next=13;break}return e.next=5,this.gravity();case 5:if(e.t0=e.sent,e.t0){e.next=10;break}return e.next=9,this.clear();case 9:e.t0=e.sent;case 10:t=e.t0,e.next=14;break;case 13:return e.abrupt("return");case 14:e.next=1;break;case 16:this.$emit("update:state",y);case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clearAll:function(){for(var e=this.container.puyo.children.length-1;e>=0;e--)this.container.puyo.removeChild(this.container.puyo.children[e]);this.game.field.erase(),this.loadPuyo()},reset:function(){for(var e=this.container.puyo.children.length-1;e>=0;e--)this.container.puyo.removeChild(this.container.puyo.children[e]);this.game.field=this.savedField,this.savedField=null,this.editMode&&(this.container.editor.interactive=!0,this.container.editor.renderable=!0),this.loadPuyo(),this.$emit("update:state",v),this.chain=0},gravity:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,i,n,r,a,o,s,l,d,h,f=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],i=this.game.field.gravitate(),0!==i.length){e.next=4;break}return e.abrupt("return",!1);case 4:for(n=!0,r=!1,a=void 0,e.prev=7,o=i[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)l=s.value,d=new u["a"]({paused:!0}),this.setPuyo(l.positional),d.to(this.pixifield[l.positional.row][l.positional.column],m[l.positional.row-l.otherPositional.row]/60,{pixi:{y:(this.game.field.dimension.rows-l.otherPositional.row-1)*b},ease:"Linear"}).to(this.pixifield[l.positional.row][l.positional.column],.1,{pixi:{scaleY:.8}}).to(this.pixifield[l.positional.row][l.positional.column],.1,{pixi:{scaleY:1},yoyo:!0}),this.pixifield[l.otherPositional.row][l.otherPositional.column]=this.pixifield[l.positional.row][l.positional.column],this.pixifield[l.positional.row][l.positional.column]=null,t.push([d,l]);e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](7),r=!0,a=e.t0;case 15:e.prev=15,e.prev=16,n||null==o.return||o.return();case 18:if(e.prev=18,!r){e.next=21;break}throw a;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return i.apply(),h=t.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.timelinePromise(t[0],t[1],"gravity"));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=27,Promise.all(h).then(function(){f.loadPuyo(!1)});case 27:return e.abrupt("return",!0);case 28:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])}));function t(){return e.apply(this,arguments)}return t}(),clear:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,i,n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],i=f["a"].Algorithm.flattenConnectionMap(this.game.field.connections()),0!==i.length){e.next=4;break}return e.abrupt("return",!1);case 4:return this.game.field.clear(i).forEach(function(e){var i=new u["a"]({paused:!0});i.to(r.pixifield[e.positional.row][e.positional.column],.1,{pixi:{alpha:.5},repeat:5,yoyo:!0,onComplete:function(){var t=new r.game.field.Positional({row:e.positional.row,column:e.positional.column});t.object=e.newObject,r.setPuyo(t,t.connections),r.chain+=1}}),t.push([i,e]),e.apply()}),n=t.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.timelinePromise(t[0],t[1],"clear"));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(n);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),loadBg:function(){var e=s["loader"].resources["pic/bg.json"].textures,t=new s["extras"].TilingSprite(e["bg"],this.app.screen.width,this.app.screen.height);this.container.bg.addChild(t);var i=new s["extras"].TilingSprite(e["bgdark"],1.5*b,this.app.screen.height);this.container.bg.addChild(i);var n=new s["extras"].TilingSprite(e["bgdark"],this.app.screen.width,1.5*b);this.container.bg.addChild(n);var r=new s["extras"].TilingSprite(e["pole1"],b,this.app.screen.height);r.y=this.game.field.dimension.hiddenRows*b,this.container.bg.addChild(r);var a=new s["extras"].TilingSprite(e["pole1"],b,this.app.screen.height);a.x=this.app.screen.width-b,a.y=this.game.field.dimension.hiddenRows*b,this.container.bg.addChild(a);var o=new s["Sprite"](e["pole0"]);o.y=this.game.field.dimension.hiddenRows*b,this.container.bg.addChild(o);var c=new s["Sprite"](e["pole0"]);c.x=this.app.screen.width-b,c.y=this.game.field.dimension.hiddenRows*b,this.container.bg.addChild(c);var u=new s["extras"].TilingSprite(e["block"],this.game.field.dimension.columns*b,b);u.x=b,u.y=this.app.screen.height-b,this.container.bg.addChild(u)},loadPuyo:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!0,i=!1,n=void 0;try{for(var r,a=this.game.field[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e&&o.object!==f["a"].Object.EMPTY&&(this.pixifield[o.row][o.column]=new s["Sprite"]),this.setPuyo(o,o.connections)}}catch(c){i=!0,n=c}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}},loadEditor:function(){var e=this,t=s["loader"].resources["pic/bg.json"].textures;this.editor.cursor=new s["Sprite"](t["select"]),this.editor.color=new s["Sprite"],this.container.editor.addChild(this.editor.color),this.container.editor.addChild(this.editor.cursor),this.container.editor.interactive=!0,this.container.editor.renderable=!1,this.container.editor.hitArea=new s["Rectangle"](b,0,this.game.field.dimension.columns*b,this.game.field.dimension.rows*b),this.container.editor.on("mousemove",function(t){var i=t.data.global.x,n=t.data.global.y;e.editor.cursor.x=Math.floor(i/b)*b,e.editor.cursor.y=Math.floor(n/b)*b,e.editor.color.x=Math.floor(i/b)*b,e.editor.color.y=Math.floor(n/b)*b,e.container.editor.renderable=!0}),this.container.editor.on("mouseout",function(t){e.container.editor.renderable=!1}),this.container.editor.on("click",function(t){e.savedField=null;var i=new e.game.field.Positional({row:e.game.field.dimension.rows-(Math.floor(t.data.global.y/b)+1),column:Math.floor(t.data.global.x/b)-1});i.object=e.editorColor,e.pixifield[i.row][i.column]||(e.pixifield[i.row][i.column]=new s["Sprite"]),e.setPuyo(i,i.connections),e.setPuyo(i.left,i.left.connections),e.setPuyo(i.right,i.right.connections),e.setPuyo(i.above,i.above.connections),e.setPuyo(i.below,i.below.connections)})},setPuyo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=s["loader"].resources["pic/skin.json"].textures;if(e.valid){var n=this.pixifield[e.row][e.column];if(n){switch(e.object){case f["a"].Object.RED:n.texture=i["red".concat(t)];break;case f["a"].Object.GREEN:n.texture=i["green".concat(t)];break;case f["a"].Object.BLUE:n.texture=i["blue".concat(t)];break;case f["a"].Object.YELLOW:n.texture=i["yellow".concat(t)];break;case f["a"].Object.PURPLE:n.texture=i["purple".concat(t)];break;case f["a"].Object.BLOCK:n.texture=i["blocks"];break;case f["a"].Object.NUISANCE:n.texture=i["nuisance"];break;case f["a"].Object.HARD_NUISANCE:n.texture=i["hard-nuisance"];break;case f["a"].Object.IRON:n.texture=i["iron"];break;case f["a"].Object.EMPTY:default:n.texture=null;break}e.object===f["a"].Object.EMPTY?(this.container.puyo.removeChild(n),this.pixifield[e.row][e.column]=null):(n.x=(e.column+1)*b,n.y=(this.game.field.dimension.rows-e.row-1)*b,this.container.puyo.addChild(n))}}}},created:function(){var e=this;l["a"],d["a"];this.game=this.encoded?h["a"].Deserializer.fromEncoded(this.encoded):new d["a"],this.savedField=null,this.pixifield=new Array(this.game.field.dimension.rows).fill(null).map(function(){return new Array(e.game.field.dimension.columns).fill(null)}),Object.defineProperty(this.pixifield,"_isVue",{value:!0,enumerable:!1}),this.app=new s["Application"]({width:(this.game.field.dimension.columns+2)*b,height:(this.game.field.dimension.rows+1)*b,antialias:!0,transparent:!1,resolution:1,forceCanvas:!0}),this.container={},Object.defineProperty(this.container,"_isVue",{value:!0,enumerable:!1}),this.container.bg=new s["Container"],Object.defineProperty(this.container.bg,"_isVue",{value:!0,enumerable:!1}),this.container.puyo=new s["Container"],Object.defineProperty(this.container.puyo,"_isVue",{value:!0,enumerable:!1}),this.app.stage.addChild(this.container.bg),this.app.stage.addChild(this.container.puyo),s["loader"].add("pic/bg.json").add("pic/skin.json").load(this.loadBg).load(this.loadPuyo),this.editMode&&(this.container.editor=new s["Container"],Object.defineProperty(this.container.editor,"_isVue",{value:!0,enumerable:!1}),this.app.stage.addChild(this.container.editor),this.app.renderer.plugins.interaction.moveWhenInside=!0,this.editor={},Object.defineProperty(this.editor,"_isVue",{value:!0,enumerable:!1}),s["loader"].load(this.loadEditor))},mounted:function(){document.getElementById("puyostage").appendChild(this.app.view)},destroyed:function(){this.app.destroy()}},k=O,C=(i("973e"),i("2877")),P=Object(C["a"])(k,a,o,!1,null,null,null),E=P.exports,x={components:{PuyoField:E},props:{encoded:{type:String,default:""},editMode:{type:Boolean,default:!1},color:{type:String,default:"EMPTY"}},data:function(){return{passEncoded:this.encoded,state:v}},watch:{passEncoded:function(){this.$emit("update:encoded",this.passEncoded)}},computed:{playing:function(){return this.state===w},playerHeight:function(){return{height:"".concat(p,"px")}}},methods:{play:function(){this.state=w},stop:function(){this.state=v},step:function(){this.state=j},reset:function(){this.state=g},openEditPage:function(){window.open("./?"+encodeURIComponent(this.passEncoded),"_blank")}},created:function(){var e=new URL(document.location).search,t=new URLSearchParams(e),i=!0,n=!1,r=void 0;try{for(var a,o=t.keys()[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var c=a.value;this.passEncoded=c;break}}catch(s){n=!0,r=s}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}}},R=x,S=(i("d901"),Object(C["a"])(R,n,r,!1,null,"19ba3d0c",null));t["a"]=S.exports},"9e5b":function(e,t,i){"use strict";i("ac6a"),i("5df3"),i("1c4c");var n=i("768b"),r=i("75fc"),a=i("b0b4"),o=i("d225"),c=i("308d"),s=i("6bb5"),u=i("013f"),l=i("4e2b"),d=i("bd86"),h=i("5c0e"),f=(i("10ad"),i("ac4d"),i("8a81"),i("96cf"),i("ab0e")),b=i("a52d"),p=Symbol.iterator,m=function(){function e(t){Object(o["a"])(this,e),v.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:function(e){return Math.floor(e/2)}}),Object(b["a"])(this,v,t)}return Object(a["a"])(e,[{key:p,value:regeneratorRuntime.mark(function e(){var t,i,n,r,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=1,i=.75,n=14,r=[Object(f["a"])(this,v)*t,Object(f["a"])(this,v)*i],a=0;case 5:if(!(a<=n)){e.next=15;break}return o=a%r.length,e.next=9,r[o];case 9:if(r[o]=Object(f["a"])(this,y).call(this,r[o]),!(r[o]<=0)){e.next=12;break}return e.abrupt("return");case 12:++a,e.next=5;break;case 15:case"end":return e.stop()}},e,this)})}]),e}(),v=new WeakMap,y=new WeakMap,w=function(){function e(t){var i=t.initialNuisanceRate,n=t.marginTime,r=t.minClearConnection;Object(o["a"])(this,e),this.initialNuisanceRate=i,this.marginTime=n,this.minClearConnection=r}return Object(a["a"])(e,[{key:"nuisanceCount",value:function(e){var t=e.point,i=e.time,n=void 0===i?0:i,r=this.nuisanceRate({time:n});return[Math.floor(t/r),t%r]}},{key:"nuisanceRate",value:function(e){var t=e.time,i=void 0===t?0:t;if(null===this.marginTime)return this.initialNuisanceRate;var n=16;i-=this.marginTime;var r=!0,a=!1,o=void 0;try{for(var c,s=new m(this.initialNuisanceRate)[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;if(i<0)break;i-=n}}catch(l){a=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return u}},{key:"nuisanceRateMultiplier",value:function(e){var t=e.time,i=void 0===t?0:t;return this.initialNuisanceRate/this.nuisanceRate({time:i})}}]),e}(),j=i("52f7"),g=i("e36d");function O(e,t,i){return Math.min(Math.max(e,t),i)}i.d(t,"a",function(){return T});var k=["initialNuisanceRate","marginTime","minClearConnection","nuisanceTransformPoint","level"],C=[8,9,3,8,5],P={initialNuisanceRate:70,marginTime:96,minClearConnection:4,nuisanceTransformPoint:0,level:1},E=["columns","visibleRows","hiddenRows"],x={columns:6,visibleRows:12,hiddenRows:1},R=[5,5,2];function S(e){e.field.gravitate=function(){return j["a"].Algorithm.gravitationalDiff(this)},e.field.connections=function(){return j["a"].Algorithm.findConnections(this,{targetObjects:["RED","BLUE","GREEN","YELLOW","PURPLE"].map(function(e){return j["a"].Object[e]}),minConnection:e.rule.minClearConnection})},e.field.clear=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j["a"].Algorithm.flattenConnectionMap(this.connections());return j["a"].Algorithm.clearingDiff(e)};var t=e.field.clone;e.field.clone=function(){var e=t.apply(this);return e.gravitate=this.gravitate,e.connections=this.connections,e.clear=this.clear,e.clone=this.clone,e}}var T=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.rule,r=i.dimension,a=void 0===r?x:r;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(s["a"])(t).call(this,{rule:new t.Rule(n),dimension:a})),S(Object(u["a"])(e)),e}return Object(l["a"])(t,e),t}(h["a"]);Object(d["a"])(T,"GAME_ID",0),Object(d["a"])(T,"Serializer",function(){function e(){Object(o["a"])(this,e)}return Object(a["a"])(e,null,[{key:"toBitStream",value:function(e,t){return h["a"].Serializer.headerToBitStream(t,{actualParams:[].concat(Object(r["a"])(k.map(function(t){return e.rule[t]})),Object(r["a"])(E.map(function(t){return e.field.dimension[t]}))),defaultParams:[].concat(Object(r["a"])(k.map(function(e){return P[e]})),Object(r["a"])(E.map(function(e){return x[e]}))),partitionSizes:[].concat(C,R)}),j["a"].Serializer.toBitStream(e.field,t),t}}]),e}()),Object(d["a"])(T,"Deserializer",function(){function e(){Object(o["a"])(this,e)}return Object(a["a"])(e,null,[{key:"fromBitStream",value:function(e){var t=h["a"].Deserializer.headerFromBitStream(e,{defaultParams:[].concat(Object(r["a"])(k.map(function(e){return P[e]})),Object(r["a"])(E.map(function(e){return x[e]}))),partitionSizes:[].concat(C,R)}),i=h["a"].Deserializer.array2objects({array:t,objectKeys:[k,E]}),a=Object(n["a"])(i,2),o=a[0],c=a[1],s=new T({rule:o,dimension:c});return j["a"].Deserializer.fromBitStream(s.field,e),s}},{key:"fromAsciiArt",value:function(e){var t=e.art,i=e.parameters,n=new T({rule:Object.assign({},P,i)});return n.field=j["a"].Deserializer.fromAsciiArt(t),S(n),n}}]),e}()),Object(d["a"])(T,"Rule",function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(s["a"])(t).call(this,{initialNuisanceRate:+i.initialNuisanceRate,marginTime:isNaN(i.marginTime=parseInt(i.marginTime))?null:i.marginTime,minClearConnection:+i.minClearConnection})),e.nuisanceTransformPoint=+i.nuisanceTransformPoint,e.level=+i.level,e}return Object(l["a"])(t,e),Object(a["a"])(t,[{key:"chainBonus",value:function(e){return e<4?8*(e-1):32*(e-3)}},{key:"colorBonus",value:function(e){switch(Math.abs(e)){case 0:case 1:return 0;case 2:return 3;default:return 2*this.colorBonus(e-1)}}},{key:"groupBonus",value:function(e){var t=e-Math.min(this.minClearConnection,4);return 0==t?0:t>=7?10:t+1}},{key:"transformPoint",value:function(e){if(e.type!=g["a"].Type.TRANSFORM)return 0;switch(e.positional.object){case j["a"].Object.RED:case j["a"].Object.YELLOW:case j["a"].Object.BLUE:case j["a"].Object.GREEN:case j["a"].Object.PURPLE:return 10;case j["a"].Object.HARD_NUISANCE:if(e.newObject===j["a"].Object.EMPTY)return 6*this.nuisanceTransformPoint;case j["a"].Object.NUISANCE:return this.nuisanceTransformPoint}}},{key:"points",value:function(e){var t=this,i=e.chain,n=e.connectionMap,r=e.transformDiffs,a=Array.from(n.values()).reduce(function(e,t){return e+Math.min(1,t.length)},0),o=Array.from(n.values()).reduce(function(e,t){return e.concat(t.map(function(e){return e.length}))},[]);return[this.level*r.reduce(function(e,i){return e+t.transformPoint(i)},0),O(this.colorBonus(a)+this.chainBonus(i)+o.reduce(function(e,i){return e+t.groupBonus(i)},0),1,999)]}}]),t}(w)),h["a"].Modes[T.GAME_ID]=T},d901:function(e,t,i){"use strict";var n=i("dd99"),r=i.n(n);r.a},dd99:function(e,t,i){},e36d:function(e,t,i){"use strict";i.d(t,"a",function(){return l});i("ac6a");var n=i("308d"),r=i("6bb5"),a=i("4e2b"),o=i("f28b"),c=(i("0d6d"),i("d225")),s=i("b0b4"),u=i("bd86"),l=function(){function e(t){var i=t.type,n=t.positional,r=t.argument;switch(Object(c["a"])(this,e),this.positional=n,this.type=i){case e.Type.TRANSFORM:this.newObject=r;break;case e.Type.EXCHANGE:this.otherPositional=r;break}Object.freeze(this)}return Object(s["a"])(e,[{key:"apply",value:function(){if(this.valid)switch(this.type){case e.Type.TRANSFORM:this.positional.object=this.newObject;break;case e.Type.EXCHANGE:var t=[this.otherPositional.object,this.positional.object];this.positional.object=t[0],this.otherPositional.object=t[1];break}}},{key:"valid",get:function(){if(!this.positional.valid)return!1;switch(this.type){case e.Type.TRANSFORM:return!0;case e.Type.EXCHANGE:return this.positional.field==this.otherPositional.field;default:return!1}}}]),e}();Object(u["a"])(l,"Collection",function(e){function t(){var e;Object(c["a"])(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return Object(n["a"])(this,(e=Object(r["a"])(t)).call.apply(e,[this].concat(a)))}return Object(a["a"])(t,e),Object(s["a"])(t,[{key:"apply",value:function(){this.forEach(function(e){return e.apply()})}}]),t}(Object(o["a"])(Array))),Object(u["a"])(l,"Type",{EXCHANGE:{},TRANSFORM:{}})}}]);